// Variables de colores
$colors: (
  primary-dark: #063B2C,
  primary-light: #D0DE85,
  secondary-brown: #8F764C,
  neutral-gray: #7B7A70,
  neutral-dark: #48514A,
  background-beige: #D5CEA9,
  urgent-red: #FF4757,
  high-orange: #FF6B35,
  white: #ffffff,
  light-gray: #f8f9fa,
  border-gray: #e0e0e0,
  text-gray: #666
);

// Funciones helper
@function color($name) {
  @return map-get($colors, $name);
}

// Mixins
@mixin gradient($color1, $color2, $direction: 135deg) {
  background: linear-gradient($direction, $color1 0%, $color2 100%);
}

@mixin glassmorphism($opacity: 0.1) {
  background: rgba(255, 255, 255, $opacity);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

@mixin card-shadow($level: 1) {
  @if $level == 1 {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  } @else if $level == 2 {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  } @else if $level == 3 {
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  }
}

@mixin transition($properties: all, $duration: 0.3s, $easing: ease) {
  transition: $properties $duration $easing;
}

@mixin button-hover {
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(208, 222, 133, 0.4);
  }
}

// Animaciones
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from { 
    opacity: 0;
    transform: translateY(-30px) scale(0.95);
  }
  to { 
    opacity: 1;
    transform: translateY(0px) scale(1);
  }
}

@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}

// Estilos principales
.calendar-container {
//   font-family: system-ui, -apple-system, sans-serif;
//   max-width: 1400px;
  margin: 0 auto;
//   padding: 20px;
  background-color: color(background-beige);
  min-height: 100vh;

  // Header premium
  &__header {
    @include gradient(color(primary-dark), color(neutral-dark));
    color: color(white);
    padding: 24px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 24px;
    @include card-shadow(2);
    border: 1px solid rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      top: 10px;
      right: 20px;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(208, 222, 133, 0.2) 0%, transparent 70%);
      border-radius: 50%;
    }

    &-info {
      display: flex;
      align-items: center;
      gap: 16px;

      &-icon {
        background: color(primary-light);
        border-radius: 12px;
        padding: 12px;
        display: flex;
        align-items: center;
      }

      &-text {
        h1 {
          margin: 0;
          font-size: 28px;
          font-weight: 700;
        }

        p {
          margin: 4px 0 0 0;
          opacity: 0.9;
          font-size: 14px;
        }
      }
    }

    &-navigation {
      display: flex;
      align-items: center;
      gap: 12px;

      &-button {
        @include glassmorphism();
        border: none;
        border-radius: 10px;
        padding: 10px;
        cursor: pointer;
        display: flex;
        align-items: center;
        color: color(white);
        @include transition();

        &:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      }

      &-month {
        @include glassmorphism();
        border-radius: 10px;
        padding: 10px 20px;

        span {
          font-size: 18px;
          font-weight: 600;
          min-width: 180px;
          text-align: center;
        }
      }
    }
  }

  // Layout principal
  &__main {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
  }

  // Calendario
  &__calendar {
    background-color: color(white);
    border-radius: 16px;
    padding: 24px;
    @include card-shadow(2);
    border: 1px solid rgba(0, 0, 0, 0.05);

    &-header {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
      margin-bottom: 12px;

      &-day {
        @include gradient(color(neutral-gray), color(neutral-dark));
        color: color(white);
        padding: 16px;
        text-align: center;
        font-weight: 700;
        font-size: 14px;
        border-radius: 8px;
      }
    }

    &-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
    }

    &-day {
      background-color: color(white);
      border: 2px solid color(border-gray);
      min-height: 140px;
      padding: 12px;
      cursor: pointer;
      @include transition();
      position: relative;
      border-radius: 12px;

      &--inactive {
        background-color: color(light-gray);
        opacity: 0.5;
        cursor: default;
      }

      &--today {
        border-color: color(primary-light);
        border-width: 3px;
      }

      &--urgent {
        box-shadow: 0 4px 16px rgba(255, 71, 87, 0.3);

        &.pulse {
          transform: scale(1.02);
        }
      }

      &--has-events {
        border-color: color(primary-light);
        background: linear-gradient(135deg, #ffffff 0%, #f8fff8 100%);
      }

      &:hover:not(&--inactive) {
        background-color: color(light-gray);
        transform: translateY(-2px);
        @include card-shadow(1);
      }

      &-number {
        font-size: 16px;
        font-weight: 600;
        color: color(primary-dark);
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;

        &--today {
          font-weight: 800;
          color: color(primary-light);
        }

        &--inactive {
          color: #999;
        }
      }

      &-urgent-indicator {
        background: color(urgent-red);
        border-radius: 50%;
        width: 8px;
        height: 8px;

        &.animate {
          animation: pulse 1s infinite;
        }
      }

      &-event {
        color: color(white);
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 11px;
        margin-bottom: 3px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        display: flex;
        align-items: center;
        gap: 4px;
        font-weight: 600;

        &--course {
          @include gradient(color(secondary-brown), color(secondary-brown));
        }

        &--event {
          @include gradient(color(neutral-dark), color(neutral-dark));
        }

        &--urgent {
          @include gradient(color(urgent-red), color(secondary-brown));
        }

        &--high {
          @include gradient(color(high-orange), color(neutral-dark));
        }
      }

      &-more {
        font-size: 11px;
        color: color(text-gray);
        font-weight: 600;
        background: color(border-gray);
        border-radius: 4px;
        padding: 2px 6px;
        text-align: center;
      }
    }
  }

  // Panel lateral
  &__sidebar {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  // Eventos urgentes
  &__urgent {
    @include gradient(color(urgent-red), color(high-orange));
    border-radius: 16px;
    padding: 20px;
    color: color(white);
    position: relative;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      top: -20px;
      right: -20px;
      width: 80px;
      height: 80px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
      border-radius: 50%;
    }

    &-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;

      h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 700;
      }
    }

    &-event {
      @include glassmorphism(0.15);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      @include transition();

      &.pulse {
        transform: scale(1.02);
      }

      &-title {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
        font-weight: 700;
        font-size: 14px;
      }

      &-date {
        font-size: 12px;
        opacity: 0.9;
        margin-bottom: 4px;
      }

      &-details {
        font-size: 11px;
        opacity: 0.9;
        margin-bottom: 6px;
        display: flex;
        flex-direction: column;
        gap: 2px;

        span {
          display: block;
        }
      }

      &-countdown {
        font-size: 13px;
        font-weight: 700;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 20px;
        padding: 4px 12px;
        display: inline-block;

        &--critical {
          background: rgba(255, 255, 255, 0.3);
        }
      }
    }

    &-empty {
      text-align: center;
      opacity: 0.8;
      font-size: 14px;
    }
  }

  // Próximos eventos
  &__upcoming {
    background: linear-gradient(135deg, color(primary-light), color(secondary-brown));
    border-radius: 16px;
    padding: 20px;
    color: color(primary-dark);

    &-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;

      h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 700;
      }
    }

    &-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    &-item {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      padding: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      @include transition();

      &:hover {
        background: rgba(255, 255, 255, 0.4);
        transform: translateX(5px);
      }

      &-date {
        background: color(primary-dark);
        border-radius: 8px;
        padding: 8px;
        text-align: center;
        color: white;
        min-width: 50px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      &-day {
        font-size: 18px;
        font-weight: 700;
        line-height: 1;
      }

      &-month {
        font-size: 11px;
        text-transform: uppercase;
        opacity: 0.9;
      }

      &-info {
        flex: 1;
      }

      &-title {
        font-weight: 600;
        font-size: 13px;
        margin-bottom: 3px;
        color: color(primary-dark);
      }

      &-time {
        font-size: 11px;
        color: color(text-gray);
      }

      &-priority {
        font-size: 16px;
        
        &--urgent {
          animation: pulse 2s infinite;
        }
      }
    }
  }

  // Estadísticas
  &__stats {
    @include gradient(color(primary-light), color(secondary-brown));
    border-radius: 16px;
    padding: 20px;
    color: color(primary-dark);

    &-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;

      h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 700;
      }
    }

    &-grid {
      display: grid;
      gap: 12px;
    }

    &-item {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 8px;
      padding: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;

      &-label {
        font-weight: 600;
      }

      &-value {
        font-size: 18px;
        font-weight: 800;
      }
    }
  }

  // Modal
  &__modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: fadeIn 0.3s ease;

    &-content {
      background-color: color(white);
      border-radius: 20px;
      padding: 32px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow: auto;
      @include card-shadow(3);
      animation: slideIn 0.3s ease;
    }

    &-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid color(border-gray);

      h3 {
        margin: 0;
        background: linear-gradient(135deg, color(primary-dark) 0%, color(neutral-dark) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 24px;
        font-weight: 700;
      }
    }

    &-close {
      background: color(border-gray);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
      color: color(text-gray);
      display: flex;
      align-items: center;
      justify-content: center;
      @include transition();

      &:hover {
        background: color(neutral-gray);
        color: color(white);
      }
    }

    &-events {
      margin-bottom: 32px;

      &-title {
        color: color(primary-dark);
        margin-bottom: 16px;
        font-size: 18px;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      &-item {
        @include gradient(color(light-gray), color(white));
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 12px;
        border: 2px solid;
        @include card-shadow(1);

        &--urgent { border-color: color(urgent-red); }
        &--high { border-color: color(high-orange); }
        &--medium { border-color: color(neutral-dark); }
        &--low { border-color: color(neutral-gray); }

        &-header {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 12px;

          &-icon {
            border-radius: 8px;
            padding: 8px;
            display: flex;
            align-items: center;
          }

          &-info {
            &-title {
              font-weight: 700;
              color: color(primary-dark);
              font-size: 16px;
            }

            &-priority {
              font-size: 12px;
              font-weight: 600;
              text-transform: uppercase;

              &--urgent { color: color(urgent-red); }
              &--high { color: color(high-orange); }
              &--medium { color: color(neutral-dark); }
              &--low { color: color(neutral-gray); }
            }
          }
        }

        &-details {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 12px;
          font-size: 14px;
          color: color(text-gray);

          &-item {
            display: flex;
            align-items: center;
            gap: 6px;
          }
        }
      }
    }

    &-form {
      @include gradient(color(light-gray), color(white));
      border-radius: 16px;
      padding: 24px;
      border: 2px solid color(primary-light);

      &-title {
        color: color(primary-dark);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 18px;
        font-weight: 700;
      }

      &-grid {
        display: grid;
        gap: 16px;

        &--two-cols {
          grid-template-columns: 1fr 1fr;
        }
      }

      &-input {
        padding: 14px;
        border: 2px solid color(border-gray);
        border-radius: 10px;
        font-size: 14px;
        @include transition();
        background-color: color(white);

        &:focus {
          outline: none;
          border-color: color(primary-light);
        }
      }

      &-actions {
        display: flex;
        gap: 12px;
        margin-top: 8px;
      }

      &-button {
        &--primary {
          @include gradient(color(primary-light), color(secondary-brown));
          color: color(primary-dark);
          border: none;
          padding: 16px 32px;
          border-radius: 10px;
          cursor: pointer;
          font-weight: 700;
          font-size: 16px;
          flex: 1;
          @include transition();
          box-shadow: 0 4px 12px rgba(208, 222, 133, 0.3);
          @include button-hover();
        }

        &--secondary {
          background-color: color(neutral-gray);
          color: color(white);
          border: none;
          padding: 16px 24px;
          border-radius: 10px;
          cursor: pointer;
          font-weight: 600;
          font-size: 16px;
          @include transition();

          &:hover {
            background-color: color(neutral-dark);
          }
        }
      }
    }
  }
}

// Responsive Design
@media (max-width: 768px) {
  .calendar-container {
    padding: 10px;

    &__main {
      grid-template-columns: 1fr;
      gap: 16px;
    }

    &__header {
      flex-direction: column;
      gap: 16px;
      text-align: center;

      &-navigation {
        justify-content: center;
      }
    }

    &__calendar {
      padding: 16px;

      &-day {
        min-height: 100px;
        padding: 8px;
      }
    }

    &__modal-content {
      padding: 20px;
      margin: 10px;
    }
  }
}

@media (max-width: 480px) {
  .calendar-container {
    &__calendar {
      &-header-day {
        padding: 8px;
        font-size: 12px;
      }

      &-day {
        min-height: 80px;
        padding: 6px;

        &-number {
          font-size: 14px;
        }

        &-event {
          font-size: 10px;
          padding: 2px 4px;
        }
      }
    }

    &__urgent,
    &__stats {
      padding: 16px;
    }
  }
}